@startuml
!include DEFS.puml

participant "MCU" as MCU
participant Câmera
participant "Módulo Edge\n(Buffer/RTSP Server)" as EDGE
participant "MDC/SCADA\n(Análise Remota)" as MDC

Câmera -> EDGE : Envio contínuo de stream de vídeo
hnote over Câmera, EDGE : EDGE mantém buffer (10s pré-falha)

MCU -> EDGE :   Sinaliza Falha Crítica Detectada
EDGE --> EDGE : Salva os 10s de buffer pré-falha e continua gravando \npor 5 segundos pós-falha;
EDGE --> EDGE : Codifica clipe salvo (H.264)
EDGE --> EDGE : Prepara para disponibilização (RTSP)

EDGE -> MDC : Inicia stream de vídeo (RTSP)

legend top
 **Diagrama de Sequência - Módulo de Controle (MC) - Video**
end legend

footer
  **Casos de Uso cobertos:**
   - **MC-007**: Captura de Vídeo para Análise de Falhas
   - **EDG-005**: Análise de Vídeo em Tempo Real (Pré-requisito para acionamento)
end footer  

@enduml
